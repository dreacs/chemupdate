# ChemSignal 대시보드 작동 원리 및 데이터 소스 안내

이 문서는 현재 구축된 ChemSignal 대시보드가 어떤 순서로 데이터를 가져오고 어떻게 화면에 뿌려주는지, 주요 작동 구조와 데이터 출처를 요약한 문서입니다.

## 1. 🔍 데이터 소스 (어디서 가져오나요?)

**A. 화학/에너지 관련 뉴스 기사 (RSS 피드)**
대시보드는 다음의 4가지 주요 키워드로 구글 뉴스의 최신 RSS(실시간 뉴스 배포 피드)를 검색하여 실시간 기사 원문 링크, 제목, 발생 시각을 자동으로 긁어옵니다.
*   **Acetone (아세톤)**: `Google News 검색 (acetone market price)`
*   **Ammonia (암모니아)**: `Google News 검색 (ammonia market price energy)`
*   **Methanol (메탄올)**: `Google News 검색 (methanol market price)`
*   **Natural Gas (천연가스)**: `Google News 검색 (natural gas market energy)`

**B. 실시간 원유 가격 (Yahoo Finance API)**
*   **Crude Brent Oil (브렌트유 현물가)**: 야후 파이낸스(Yahoo Finance)의 숨겨진 차트 API(`BZ=F`)를 직접 호출하여, 전 세계 석유 가격의 기준이 되는 최신 브렌트유 배럴당($/bbl) 실시간 가격을 가져옵니다.

---

## 2. 🧠 AI 데이터 분석 (어떻게 처리하나요?)

위에서 긁어온 뉴스 기사들의 제목(헤드라인)을 모아, **OpenAI (ChatGPT, gpt-4o-mini 모델)** 에게 한꺼번에(Batch) 보냅니다. 
AI는 각 뉴스 기사에 대해 다음 3가지를 분석합니다:

1.  **Sentiment (시장 심리)**: 이 뉴스가 시장/가격에 끼칠 영향이 긍정적(`Bullish`), 부정적(`Bearish`), 혹은 중립적(`Neutral`)인지 판단합니다.
2.  **Summary (AI 요약)**: 긴 기사 내용을 직접 읽을 필요 없이 단 1문장으로 핵심만 짧게 요약해 줍니다.
3.  **Commodity (핵심 원자재)**: 기사 내용의 주체가 되는 원자재가 무엇인지(`Brent Oil`, `Acetone`, `Ammonia`, `Methanol`, `Natural Gas` 등) 자동으로 분류하여 태그를 답니다.

---

## 3. 💾 데이터 저장 알고리즘 (어디에 보관하나요?)

분석이 끝난 뉴스 데이터들은 휘발되지 않고 영구적으로 데이터베이스에 쌓입니다.

*   **저장소**: **Supabase (클라우드 데이터베이스)**
*   **중복 방지 (Deduplication)**: 이미 똑같은 제목의 뉴스가 데이터베이스 안에 있다면 아무것도 하지 않고 무시합니다. 오직 '새로운 제목'의 뉴스만 발견될 때 새로이 DB에 밀어 넣습니다(INSERT).
*   이로 인해 서버를 언제 껐다 켜든, 혹은 다른 컴퓨터에서 접속하든 과거에 수집했던 뉴스 히스토리가 절대 날아가지 않고 계속 누적됩니다.

---

## 4. 🖥️ 화면 표시 흐름 (어떻게 렌더링되나요?)

사용자(고객님)가 브라우저에서 `localhost:3000` (나중에 Vercel 배포 시 `chemupdate.vercel.app`) 주소로 접속하면, 백그라운드 서버가 다음 작업을 불과 몇 초 만에 자동으로 수행합니다.

1.  **데이터 무한 Fetch**: 구글 뉴스와 야후 파이낸스에서 최신 정보를 재빠르게 가져오고, AI 분석을 거칩니다.
2.  **DB 삽입**: 분석된 새 뉴스들을 Supabase DB 창고에 백업합니다.
3.  **풀(Full) 데이터 로드**: Supabase DB 창고에서 '*과거부터 현재까지 쌓인 모든 뉴스 데이터*'를 최신 날짜순으로 싹 다 당겨옵니다.
4.  **UI 전달**: 이렇게 당겨온 '전체 누적 뉴스 데이터'와 '실시간 브렌트유 가격'을 대시보드 프론트엔드 화면으로 전달합니다.
5.  **차트 및 뉴스 렌더링**: 화면(React)에서는 이 데이터들을 최신순으로 그려내며, 타임라인 차트에 날짜별 긍정(Bullish)/부정(Bearish)/중립(Neutral) 뉴스 개수를 집계해서 역동적인 막대그래프로 보여줍니다.
